<Window x:Class="CS464AE.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CS464AE"
        mc:Ignorable="d"
        Title="MainWindow" Height="600" Width="1025">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2E86AB" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="📝 Todo App" 
                          FontSize="24" FontWeight="Bold" 
                          Foreground="White" VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Xin chào: " Foreground="White" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBlock x:Name="txtCurrentUser" Text="Bạn chưa đăng nhập" 
                              Foreground="White" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <Button x:Name="btnLogin" Content="Đăng nhập" Click="BtnLogin_Click" 
                           Background="#A23B72" Foreground="White" Padding="10,5" Margin="5,0"/>
                    <Button x:Name="btnLogout" Content="Đăng xuất" Click="BtnLogout_Click" 
                           Background="#A23B72" Foreground="White" Padding="10,5" Margin="5,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Border Grid.Column="0" Background="#F5F5F5" BorderBrush="#DDD" BorderThickness="0,0,1,0">
                <StackPanel Margin="10">
                    <TextBlock Text="📋 Danh mục" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>

                    <Button x:Name="btnAllTodos" Content="📝 Tất cả công việc" 
                           Click="BtnAllTodos_Click" Margin="0,2" Padding="10,8" 
                           Background="White" BorderBrush="#DDD"/>

                    <Button x:Name="btnPendingTodos" Content="⏳ Chưa hoàn thành" 
                           Click="BtnPendingTodos_Click" Margin="0,2" Padding="10,8" 
                           Background="White" BorderBrush="#DDD"/>

                    <Button x:Name="btnCompletedTodos" Content="✅ Đã hoàn thành" 
                           Click="BtnCompletedTodos_Click" Margin="0,2" Padding="10,8" 
                           Background="White" BorderBrush="#DDD"/>

                    <Button x:Name="btnOverdueTodos" Content="🚨 Quá hạn" 
                           Click="BtnOverdueTodos_Click" Margin="0,2" Padding="10,8" 
                           Background="White" BorderBrush="#DDD"/>

                    <Separator Margin="0,10"/>

                    <Button x:Name="btnStatistics" Content="📊 Thống kê" 
                           Click="BtnStatistics_Click" Margin="0,2" Padding="10,8" 
                           Background="#17A2B8" Foreground="White" BorderBrush="#17A2B8"/>

                    <Separator Margin="0,10"/>

                    <TextBlock Text="📈 Thống kê nhanh" FontSize="14" FontWeight="Bold" Margin="0,0,0,5"/>
                    <TextBlock x:Name="txtTotalTodos" Text="Tổng: 0" Margin="5,2"/>
                    <TextBlock x:Name="txtPendingTodos" Text="Chưa xong: 0" Margin="5,2"/>
                    <TextBlock x:Name="txtCompletedTodos" Text="Đã xong: 0" Margin="5,2"/>
                </StackPanel>
            </Border>

            <!-- Todo List -->
            <Grid Grid.Column="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="727*"/>
                    <ColumnDefinition Width="42*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Toolbar -->
                <Border Grid.Row="0" Background="White" BorderBrush="#DDD" BorderThickness="0,0,0,1" Padding="10" Grid.ColumnSpan="2" Margin="0,0,-0.2,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock x:Name="txtCurrentView" Grid.Column="0" Text="Tất cả công việc" 
                                  FontSize="18" FontWeight="Bold" VerticalAlignment="Center"/>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button x:Name="btnAddTodo" Content="➕ Thêm mới" Click="BtnAddTodo_Click" 
                                   Background="#2E86AB" Foreground="White" Padding="10,5" Margin="5,0"/>
                            <Button x:Name="btnEdit" Content="✏️ Sửa" Click="BtnAddTodo_Click" 
                                   Background="#2E86AB" Foreground="White" Padding="10,5" Margin="5,0"/>
                            <Button x:Name="btnDelete" Content="🗑️ Xóa" Click="BtnAddTodo_Click" 
                                   Background="#2E86AB" Foreground="White" Padding="10,5" Margin="5,0"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Todo Items List -->
                <ListView x:Name="lvTodos" Grid.Row="1" Margin="10,10,9.8,10.2" 
                         SelectionChanged="LvTodos_SelectionChanged" Grid.ColumnSpan="2">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Trạng thái" Width="80">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsCompleted}" 
                                                 IsEnabled="False" HorizontalAlignment="Center"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Tiêu đề" DisplayMemberBinding="{Binding Title}" Width="200"/>
                            <GridViewColumn Header="Mô tả" DisplayMemberBinding="{Binding Description}" Width="250"/>
                            <GridViewColumn Header="Hạn chót" Width="120">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding DueDate, StringFormat=dd/MM/yyyy}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Danh mục" DisplayMemberBinding="{Binding Category}" Width="100"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#F0F0F0" BorderBrush="#DDD" BorderThickness="0,1,0,0" Padding="10,5">
            <TextBlock x:Name="txtStatus" Text="Sẵn sàng" FontSize="12"/>
        </Border>
    </Grid>

</Window>
